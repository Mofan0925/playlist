{"ast":null,"code":"var _jsxFileName = \"H:\\\\\\u524D\\u7AEF\\\\react\\\\Node-Search\\\\router\\\\src\\\\index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Switch, Route, Redirect } from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Add from \"./add\";\n/*Path:要渲染的URL，没有Path属性的时候将匹配任意路由\n * Component：要渲染的组件\n * exact: 精确匹配\n * strict： 严格匹配、考虑路径结尾的/\n * */\n\nexport default class App extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.now = 0;\n    this.state = {\n      data: []\n    };\n    this.add = this.add.bind(this);\n    this.setCheckAll = this.setCheckAll.bind(this);\n    this.setCheck = this.setCheck.bind(this);\n    this.setLike = this.setLike.bind(this);\n    this.remove = this.remove.bind(this);\n    this.removeSelect = this.removeSelect.bind(this);\n    this.likeSelect = this.likeSelect.bind(this);\n    this.cancelLikeSelect = this.cancelLikeSelect.bind(this);\n  }\n\n  add(addData) {\n    let data = this.state.data;\n    data.push({\n      id: this.now,\n      title: addData.title,\n      singer: addData.singer,\n      selected: false,\n      like: false\n    });\n    this.now++;\n    this.setState({\n      data\n    });\n  }\n\n  isCheckAll() {\n    let data = this.state.data;\n\n    for (let i = 0; i < data.length; i++) {\n      if (!data[i].selected) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  setCheckAll(checked) {\n    let data = this.state.data.map(val => {\n      val.selected = checked;\n      return val;\n    });\n    this.setState({\n      data\n    });\n  }\n\n  setCheck(index, checked) {\n    let data = this.state.data;\n    data.forEach(val => {\n      if (val.id === index) {\n        val.selected = checked;\n      }\n    });\n    this.setState({\n      data\n    });\n  }\n\n  setLike(index, checked) {\n    let data = this.state.data;\n    data.forEach(val => {\n      if (val.id === index) {\n        val.like = checked;\n      }\n    });\n    this.setState({\n      data\n    });\n  }\n\n  remove(index) {\n    let data = this.state.data.filter(val => val.id !== index);\n    this.setState({\n      data\n    });\n  }\n\n  removeSelect() {\n    let data = this.state.data.filter(val => !val.selected);\n    this.setState({\n      data\n    });\n  }\n\n  likeSelect() {\n    let data = this.state.data.map(val => {\n      if (val.selected) {\n        val.like = true;\n      }\n\n      return val;\n    });\n    this.setState({\n      data\n    });\n  }\n\n  cancelLikeSelect() {\n    let data = this.state.data.map(val => {\n      if (val.selected) {\n        val.like = false;\n      }\n\n      return val;\n    });\n    this.setState({\n      data\n    });\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (!nextState.listState) {\n      let likeData = nextState.data.filter(val => val.like);\n\n      if (!likeData.length) {\n        this.setState({\n          listState: true\n        });\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  render() {\n    return React.createElement(BrowserRouter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"musicApp\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/add\",\n      render: e => {\n        return React.createElement(Add, {\n          length: this.state.data.length,\n          add: this.add,\n          router: e,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/\",\n      render: e => {\n        if (this.state.data.length === 0) {\n          return React.createElement(Redirect, {\n            to: \"/add\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152\n            },\n            __self: this\n          });\n        }\n\n        return React.createElement(Home, {\n          pathname: e.location.pathname,\n          data: this.state.data,\n          isCheckAll: this.isCheckAll(),\n          checkAll: this.setCheckAll,\n          setCheck: this.setCheck,\n          setLike: this.setLike,\n          remove: this.remove,\n          removeSelect: this.removeSelect,\n          likeSelect: this.likeSelect,\n          cancelLikeSelect: this.cancelLikeSelect,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }))));\n  }\n\n}\nReactDOM.render(React.createElement(App, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 175\n  },\n  __self: this\n}), document.getElementById('root'));","map":{"version":3,"sources":["H:/前端/react/Node-Search/router/src/index.js"],"names":["React","ReactDOM","BrowserRouter","Switch","Route","Redirect","Home","Add","App","Component","constructor","arguments","now","state","data","add","bind","setCheckAll","setCheck","setLike","remove","removeSelect","likeSelect","cancelLikeSelect","addData","push","id","title","singer","selected","like","setState","isCheckAll","i","length","checked","map","val","index","forEach","filter","shouldComponentUpdate","nextProps","nextState","listState","likeData","render","e","location","pathname","document","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter,Switch,Route,Redirect} from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Add from \"./add\";\n/*Path:要渲染的URL，没有Path属性的时候将匹配任意路由\n * Component：要渲染的组件\n * exact: 精确匹配\n * strict： 严格匹配、考虑路径结尾的/\n * */\nexport default class App extends React.Component {\n    constructor () {\n        super ( ...arguments );\n        this.now = 0;\n        this.state = {\n            data : []\n        };\n        this.add = this.add.bind ( this );\n        this.setCheckAll = this.setCheckAll.bind ( this );\n        this.setCheck = this.setCheck.bind ( this );\n        this.setLike = this.setLike.bind ( this );\n        this.remove = this.remove.bind ( this );\n        this.removeSelect = this.removeSelect.bind ( this );\n        this.likeSelect = this.likeSelect.bind ( this );\n        this.cancelLikeSelect = this.cancelLikeSelect.bind ( this );\n    }\n    add (addData) {\n        let data = this.state.data;\n        data.push ( {\n            id : this.now ,\n            title : addData.title ,\n            singer : addData.singer,\n            selected : false ,\n            like : false\n        } );\n        this.now ++;\n        this.setState ( {\n            data\n        } )\n    }\n\n    isCheckAll () {\n        let data = this.state.data;\n        for ( let i = 0 ; i < data.length ; i ++ ) {\n            if ( ! data[ i ].selected ) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    setCheckAll ( checked ) {\n        let data = this.state.data.map ( ( val )=> {\n            val.selected = checked;\n            return val;\n        } );\n        this.setState ( {\n            data\n        } )\n    }\n\n    setCheck ( index , checked ) {\n        let data = this.state.data;\n        data.forEach ( ( val )=> {\n            if ( val.id === index ) {\n                val.selected = checked;\n            }\n        } );\n        this.setState ( {\n            data\n        } )\n    }\n\n    setLike ( index , checked ) {\n        let data = this.state.data;\n        data.forEach ( ( val )=> {\n            if ( val.id === index ) {\n                val.like = checked;\n            }\n        } );\n        this.setState ( {\n            data\n        } )\n    }\n\n    remove ( index ) {\n        let data = this.state.data.filter ( ( val )=>val.id !== index );\n        this.setState ( {\n            data\n        } )\n    }\n\n    removeSelect () {\n        let data = this.state.data.filter ( ( val )=>! val.selected );\n        this.setState ( {\n            data\n        } )\n    }\n\n    likeSelect () {\n        let data = this.state.data.map ( ( val )=> {\n            if ( val.selected ) {\n                val.like = true;\n            }\n            return val;\n        } );\n        this.setState ( {\n            data\n        } )\n    }\n\n    cancelLikeSelect () {\n        let data = this.state.data.map ( ( val )=> {\n            if ( val.selected ) {\n                val.like = false;\n            }\n            return val;\n        } );\n        this.setState ( {\n            data\n        } )\n    }\n\n    shouldComponentUpdate ( nextProps , nextState ) {\n        if ( ! nextState.listState ) {\n            let likeData = nextState.data.filter ( ( val )=>val.like );\n            if ( ! likeData.length ) {\n                this.setState ( {\n                    listState : true\n                } );\n                return false;\n            }\n        }\n        return true;\n    }\n\n    render () {\n        return (\n            <BrowserRouter>\n                <div id=\"musicApp\">\n                    <Switch>\n                        <Route path=\"/add\" render={(e)=>{\n\n                            return (<Add\n                                length = {this.state.data.length}\n                                add = {this.add}\n                                router = {e}\n                            />)\n                        }}/>\n                        <Route path=\"/\" render={(e)=>{\n                        if(this.state.data.length===0){\n                           return <Redirect to=\"/add\"/>\n                        }\n                     return <Home\n                                   pathname={e.location.pathname}\n                                    data={this.state.data}\n                                    isCheckAll = {this.isCheckAll()}\n                                    checkAll = {this.setCheckAll}\n                                    setCheck = {this.setCheck}\n                                    setLike = {this.setLike}\n                                    remove = {this.remove}\n                                    removeSelect = {this.removeSelect}\n                                    likeSelect = {this.likeSelect}\n                                    cancelLikeSelect = {this.cancelLikeSelect}\n                     />\n\n                 }}/>\n                    </Switch>\n\n                </div>\n            </BrowserRouter>\n        )\n    }\n}\nReactDOM.render (<App/> , document.getElementById ( 'root' ) );\n\n\n"]},"metadata":{},"sourceType":"module"}